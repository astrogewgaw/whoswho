id: home
type: PageHeaderMenu
properties:
  title: Who's Who
layout:
  contentJustify: center
blocks:
  - id: cover
    type: Card
    layout:
      contentGutter: 15
    blocks:

      - id: intro
        type: Markdown
        properties:
          style:
            text-align: justify
            font-family: Fredoka One
          skipHtml: true
          content:
            _ref: README.md

      # The list. I am using the Ag-Grid block provided by lowdefy for this.
      # Ag-Grid is a feature-rich javascript grid and table library. It comes
      # with a lot of functionality, so hopefully adopting it from the get-go
      # will help me avoid future problems.
      
      - id: table
        type: AgGridAlpine
        properties:
          pagination: true
          rowData:
            _ref: public/data.json
          defaultColDef:
            sortable: true
            resizable: true
            filter: true
          columnDefs:
            - headerName: Name
              field: Name
              width: 350
            - headerName: Institution
              field: Institution
              width: 350
            - headerName: Position
              field: Position
              width: 350
            - headerName: Email
              field: Email
              width: 350
              cellRenderer:
                  # Creates a function which wraps the row data in an <a/> tag.
                  _function:
                    __string.concat:
                      - '<a href="mailto:'
                      - __args: 0.data.Email
                      - '">'
                      - __args: 0.data.Email
                      - </a>
            - headerName: Website
              field: Website
              width: 350
              cellRenderer:
                  # Creates a function which wraps the row data in an <a/> tag.
                  _function:
                    __string.concat:
                      - '<a href="'
                      - __args: 0.data.Website
                      - '">'
                      - __args: 0.data.Website
                      - </a>
            - headerName: Twitter
              field: Twitter
              width: 200
              cellRenderer:
                  # Creates a function which wraps the row data in an <a/> tag.
                  _function:
                    __string.concat:
                      - '<a href="https://twitter.com/'
                      - __args: 0.data.Twitter
                      - '">'
                      - __args: 0.data.Twitter
                      - </a>
      
      - id: download_button
        type: Button
        properties:
          block: true
          title: "Download as CSV"
          type: primary
          icon: SaveOutlined
          style:
            font-family: Fredoka One
        events:
          onClick:
            - id: download
              type: CallMethod
              params:
                blockId: table
                method: exportDataAsCsv